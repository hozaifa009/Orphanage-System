<?php

    include_once "FileManager.php";
    include_once "View.php";
    class ActivityDetails 
    {
        private $id;
        private $userid;
        private $ActivityID;
        private $realtime;
        private $Donetime;
        private $rating;
        private $objectFILE;
        public function set_Id($id)
        {
            $this->id=$id;
        }
       public function get_Id()
        {
            return $this->id;
        }
        public function set_UserId($userid)
        {
            $this->userid=$userid;
        }
        public function get_UserId()
        {
            return $this->userid;
        }
        public function set_ActivityID($ActivityID)
        {
            $this->ActivityID=$ActivityID;
        }
        public function get_ActivityID()
        {
            return $this->ActivityID;
        }
        public function set_realtime($realtime)
        {
            $this->realtime=$realtime;
        }
        public function get_realtime()
        {
            return $this->realtime;
        }
        public function set_rating($rating)
        {
            $this->rating=$rating;
        }
        public function get_rating()
        {
            return $this->rating;
        }
        public function __construct() 
        {
            $this->objectFILE = new FileManeger();
            $this->objectFILE->set_Filename("Daily.txt");
            $this->objectFILE->set_Separator("~");
        }
        public function Define($orphan)
        {
            $this->id= $orphan;
            $SearchedLine=$this->objectFILE->SearchFor($this->id);
            $Array=explode("~",$SearchedLine);
            for($i=0;$i<count($Array);$i++)
            {
                if($i==1)
                {
                    $this->userid=$Array[$i];
                }
                if($i==4)
                {
                    $this->realtime=$Array[$i];
                }
                if($i == 2)
                {
                    $this->objectFILE->set_Filename("Activities.txt");
                    $neededid=$this->objectFILE->getIDbyName($Array[$i],0);
                    $this->ActivityID=$neededid;
                }
            }
            return $this->id;
        }
        public function StoreRecord()
        {
            $this->objectFILE->set_Filename("Details.txt");
            $record=$this->id."~".$this->userid."~".$this->ActivityID."~".$this->realtime;
            $this->objectFILE->Write($record);
        }
        public function ToDraw()
        {
            echo "<table border=1>";
            $Myfile=fopen("Details.txt","r+");
            while(!feof($Myfile))
            {
                $Line=fgets($Myfile);
                DrawTable($Line);
            }
            echo "</table>";
        }
        public function test2() 
        {
            $this->id=1;
            return $this->id;
        }
    }

?>
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

<?php
    class FileManeger
    {
        private $Separator;
        private $Filename;
        function set_Separator($Separator)
        {
            $this->Separator=$Separator;
        }
        function get_Separator()
        {
            return $this->Separator;
        }
        function set_Filename($Filename)
        {
            $this->Filename=$Filename;
        }
        function get_Filename()
        {
            return $this->Filename;
        }
        public function SearchFor($Find)
        {
            $Myfile=fopen($this->Filename,"r+");
            while(!feof($Myfile))
            {
                $Line=fgets($Myfile);
                $Array=explode($this->Separator,$Line);
                for($i=0;$i<count($Array);$i++)
                {
                    if($Array[$i]==$Find)
                    {
                        return $Line;
                    }
                }
            }
        }
        public function getIDbyName($Find,$indexreturn)
        {
            $Myfile=fopen($this->Filename,"r+");
            while(!feof($Myfile))
            {
                $Line=fgets($Myfile);
                $Array=explode($this->Separator,$Line);
                for($i=0;$i<count($Array);$i++)
                {
                    if($Array[$i]==$Find)
                    {
                        $get=$Array[$indexreturn];
                        return $get;
                    }
                }
            }
        }
        public function Write($record)
        {
            $Myfile=fopen($this->Filename,"a+");
            fwrite($Myfile,$record);
            fclose($Myfile);
        }
        function Testing()
        {
            $this->Separator="~";
            return $this->Separator;
        }
    }

?>

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- <table border="1">
        <tr>
        <td>id</td>
        <td>name</td>
        <td>here</td>
        </tr> -->
    <?php

        function DrawTable($Line)
        {
            // echo "<table border=1>";
            // echo "<h2>"."Besmellah"."</h2>";
            // $Myfile=fopen($filename,"r+");
            // while(!feof($Myfile))
            // {
            //     $Line=fgets($Myfile);
                echo "<tr>";
                $Array=explode("~",$Line);
                for($i=0;$i<count($Array);$i++)
                {
                    echo "<td>". $Array[$i]."</td>";
                }
                echo "</tr>";
            // }
            // echo "</table>";

        }
    ?>
    <!-- </table> -->
</body>
</html>
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

</head>
    <form action="Test.php" method="GET">
    Orphan_ID <input type="text"  name="nameofneed" >
    <br>
	<input type="submit" />
    </form>
    <?php
    

    ?>
</html>

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

<?php
    include_once "FileManager.php";
    include_once "DailyActivityDetails.php";
    // $here=$object->Testing();
    //echo "$here";
    $object=new FileManeger();
    $obj=new ActivityDetails();
    $orphan=$_GET["nameofneed"];
    $cout=$obj->Define($orphan);
    $obj->StoreRecord();
    $obj->ToDraw();
    // $Arrayelgebto=$obj->SearchFor("Daily.txt.txt","~","1","Null","5");
    // for($i=0;$i<5;$i++)
    // {
    //     echo "the array is     ".$Arrayelgebto[$i];
    //     "<br>";
    // }
    // "<hr>";
    // $Line=$obj->SearchFor("Daily.txt.txt","~","2");
    // echo "the array is     ";
    // $Arrayelgebto=explode("~",$Line);
    // for($i=0;$i<count($Arrayelgebto);$i++)
    // {
    //     echo $Arrayelgebto[$i]."~";
    // }
    // "<br>";
    // $Line=$object->SearchFor("Daily.txt.txt","~","2");
    // echo "the array is     ";
    // $Arrayelgebto=explode("~",$Line);
    // for($i=0;$i<count($Arrayelgebto);$i++)
    // {
    //     if($i != 3)
    //     {
    //         $record=$Arrayelgebto[$i];
    //         $object->WriteStoreRecord($record);
    //         echo "~";
    //     }
    // }
    // echo"hr";
    // $Line2=$object->SearchFor("Daily.txt","~",$Arrayelgebto[2]);
    // $Arrayelgebto2=explode("~",$Line);
    // $object->WriteStoreRecord($Arrayelgebto[0]);

    // $cout=$obj->Define();
    // echo "el ID hwa    ". $cout;
    // $cout=$obj->StoreRecord();
    
    // $cout=$obj->ToDraw();
    
    // for($i=0;$i<3;$i++)
    // {
    //     if($i != 3)
    //     {
    //         $record=$Arrayelgebto[$i];
    //         echo $record."~";
    //     }
    // }
    // $Arrayelgebto=explode("~",$cout);
    // for($i=0;$i<count($Arrayelgebto);$i++)
    // {
    //     if($i != 3)
    //     {
    //         $record=$Arrayelgebto[$i];
    //         $object->WriteStoreRecord($record);
    //         echo "~";
    //     }
    // }

    //$Arrayelgebto=$obj->SearchFor("Daily.txt.txt","~","1","Null","2");
    //echo "$heree";
?>

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
